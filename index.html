<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hotel Concierge — Portland, Maine</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #1a1a2e;
    --cream: #faf8f4;
    --gold: #c8a45e;
    --gold-light: #e8d5a0;
    --gold-dark: #9a7b3a;
    --sage: #7a8b6f;
    --sage-light: #d4dccf;
    --ocean: #5a7b8a;
    --ocean-light: #c5d5dc;
    --warm: #b8856c;
    --warm-light: #e8d5cb;
    --card-bg: #ffffff;
    --border: #e8e4dd;
    --text-secondary: #6b6560;
    --shadow: 0 2px 20px rgba(26,26,46,0.06);
    --shadow-hover: 0 8px 40px rgba(26,26,46,0.12);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--cream);
    color: var(--ink);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  /* --- HEADER --- */
  .header {
    background: var(--ink);
    color: var(--cream);
    padding: 2.5rem 2rem 2rem;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .header::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse at 20% 50%, rgba(200,164,94,0.15) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 50%, rgba(90,123,138,0.1) 0%, transparent 60%);
  }
  .header-content { position: relative; z-index: 1; max-width: 720px; margin: 0 auto; }
  .header-label {
    font-family: 'DM Sans', sans-serif;
    font-weight: 500;
    letter-spacing: 3px;
    text-transform: uppercase;
    font-size: 0.7rem;
    color: var(--gold);
    margin-bottom: 0.5rem;
  }
  .header h1 {
    font-family: 'Playfair Display', serif;
    font-weight: 600;
    font-size: clamp(1.8rem, 4vw, 2.6rem);
    line-height: 1.2;
    margin-bottom: 0.4rem;
  }
  .header p {
    font-size: 0.88rem;
    color: rgba(250,248,244,0.55);
    font-weight: 300;
  }

  /* --- MAIN CONTAINER --- */
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 1.5rem 1.5rem 3rem;
  }

  /* --- SEARCH BAR --- */
  .search-section { margin-bottom: 1.2rem; }
  .search-wrapper {
    position: relative;
    max-width: 560px;
    margin: 0 auto;
  }
  .search-icon {
    position: absolute;
    left: 1.1rem;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    color: var(--text-secondary);
    pointer-events: none;
  }
  .search-input {
    width: 100%;
    padding: 0.85rem 1rem 0.85rem 3rem;
    border: 1.5px solid var(--border);
    border-radius: 50px;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.95rem;
    background: var(--card-bg);
    color: var(--ink);
    outline: none;
    transition: border-color 0.25s, box-shadow 0.25s;
  }
  .search-input::placeholder { color: #b0aaa2; }
  .search-input:focus {
    border-color: var(--gold);
    box-shadow: 0 0 0 3px rgba(200,164,94,0.15);
  }
  .clear-btn {
    position: absolute;
    right: 0.9rem;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: 1.1rem;
    display: none;
    padding: 4px;
    line-height: 1;
  }
  .clear-btn.visible { display: block; }

  /* --- CATEGORY FILTERS --- */
  .filters {
    display: flex;
    flex-wrap: wrap;
    gap: 0.45rem;
    justify-content: center;
    margin-bottom: 1.5rem;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
  .filter-btn {
    font-family: 'DM Sans', sans-serif;
    font-size: 0.78rem;
    font-weight: 500;
    padding: 0.42rem 0.9rem;
    border-radius: 50px;
    border: 1.5px solid var(--border);
    background: var(--card-bg);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }
  .filter-btn:hover {
    border-color: var(--gold);
    color: var(--ink);
  }
  .filter-btn.active {
    background: var(--ink);
    color: var(--cream);
    border-color: var(--ink);
  }

  /* --- RESULTS HEADER --- */
  .results-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 0.8rem;
    padding: 0 0.2rem;
  }
  .results-count {
    font-size: 0.82rem;
    color: var(--text-secondary);
    font-weight: 400;
  }
  .sort-toggle {
    font-family: 'DM Sans', sans-serif;
    font-size: 0.78rem;
    color: var(--text-secondary);
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .sort-toggle:hover { color: var(--ink); }

  /* --- CARDS GRID --- */
  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1rem;
  }

  .card {
    background: var(--card-bg);
    border-radius: 14px;
    border: 1px solid var(--border);
    padding: 1.2rem 1.3rem;
    transition: box-shadow 0.3s, transform 0.2s;
    cursor: default;
    position: relative;
    animation: fadeUp 0.35s ease both;
  }
  .card:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.7rem;
  }
  .card-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem;
    font-weight: 600;
    line-height: 1.25;
    flex: 1;
    padding-right: 0.5rem;
  }
  .card-distance-badge {
    font-size: 0.7rem;
    font-weight: 500;
    color: var(--ocean);
    background: var(--ocean-light);
    padding: 0.2rem 0.55rem;
    border-radius: 20px;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .card-categories {
    display: flex;
    flex-wrap: wrap;
    gap: 0.3rem;
    margin-bottom: 0.75rem;
  }
  .card-cat {
    font-size: 0.67rem;
    font-weight: 500;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    padding: 0.18rem 0.5rem;
    border-radius: 20px;
  }
  .cat-casual    { background: #e8f0e4; color: #4a6b42; }
  .cat-fancy     { background: #f0e8ec; color: #7a4a5e; }
  .cat-brewery   { background: #e8e0d4; color: #7a6840; }
  .cat-winter    { background: #dce8f0; color: #3a5a72; }
  .cat-summer    { background: #f5edd8; color: #8a7030; }
  .cat-kids      { background: #e4eaf0; color: #4a6080; }
  .cat-coffee    { background: #f0e8dc; color: #7a5c3a; }
  .cat-yearround { background: #e0e8e4; color: #4a6858; }

  .card-details {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.25rem 0.7rem;
    font-size: 0.82rem;
  }
  .detail-label {
    color: var(--text-secondary);
    font-weight: 400;
    white-space: nowrap;
  }
  .detail-value {
    color: var(--ink);
    font-weight: 400;
    white-space: pre-line;
    line-height: 1.45;
  }
  .detail-value.closed-val {
    color: #b85c4a;
    font-weight: 500;
  }
  .detail-value.hours-val {
    font-size: 0.78rem;
    color: var(--text-secondary);
  }

  .divider {
    height: 1px;
    background: var(--border);
    margin: 0.6rem 0;
  }

  /* --- EMPTY STATE --- */
  .empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-secondary);
  }
  .empty-state svg { margin-bottom: 1rem; opacity: 0.3; }
  .empty-state p { font-size: 0.95rem; }

  /* --- RESPONSIVE --- */
  @media (max-width: 700px) {
    .cards-grid { grid-template-columns: 1fr; }
    .container { padding: 1rem 1rem 2rem; }
    .header { padding: 2rem 1rem 1.5rem; }
  }
</style>
</head>
<body>

<div class="header">
  <div class="header-content">
    <div class="header-label">Guest Concierge</div>
    <h1>Portland, Maine — Local Guide</h1>
    <p>Restaurants, breweries, attractions & more near your hotel</p>
  </div>
</div>

<div class="container">
  <div class="search-section">
    <div class="search-wrapper">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input type="text" class="search-input" id="searchInput" placeholder="Search by name, category, distance…" autocomplete="off">
      <button class="clear-btn" id="clearBtn" title="Clear search">✕</button>
    </div>
  </div>

  <div class="filters" id="filters"></div>

  <div class="results-header">
    <span class="results-count" id="resultsCount"></span>
    <button class="sort-toggle" id="sortToggle">
      <span>Distance ↑</span>
    </button>
  </div>

  <div class="cards-grid" id="cardsGrid"></div>
  <div class="empty-state" id="emptyState" style="display:none;">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/><path d="M8 11h6"/></svg>
    <p>No results found — try adjusting your search or filters.</p>
  </div>
</div>

<script>
// ========== DATA ==========
const DATA = [
  { name:"EVO Kitchen + Bar", distance:"0.012 miles", driving:"--", walking:"1 minute", closed:"Monday", hours:"Sunday, & Tuesday - Thursday: 4PM-9PM\nFriday & Saturday: 4PM-9:30PM", categories:["Casual Restaurant"] },
  { name:"The Independent Ice Co.", distance:"0.02 miles", driving:"--", walking:"1 minute", closed:"", hours:"Sunday-Thursday: 4PM-11PM\nFriday and Saturday: 4PM-11:30PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Rigby Yard", distance:"0.03 miles", driving:"--", walking:"1 minutes", closed:"", hours:"Monday-Thursday: 9AM-10PM\nTuesday & Wednesday: 9AM-4PM\nFriday: 9AM-11PM\nSaturday: 11:30AM-11PM\nSunday: 11:30AM-9PM", categories:["Casual Restaurant","Brewery/Cocktail Bar/Pub"] },
  { name:"Street and Co.", distance:"0.06 miles", driving:"--", walking:"1 minute", closed:"", hours:"Sunday-Thursday: 4:30PM-9PM\nFriday & Saturday: 4:30PM-9:30PM", categories:["Fancy Restaurant"] },
  { name:"Central Provisions", distance:"0.07 miles", driving:"--", walking:"2 minutes", closed:"", hours:"Sunday-Thursday: 11AM-2PM & 5-9:30PM\nFriday & Saturday: 11AM-2PM & 5PM-10PM", categories:["Fancy Restaurant"] },
  { name:"Via Vecchia", distance:"0.08 miles", driving:"--", walking:"2 minutes", closed:"", hours:"Sunday-Thursday: 4PM-9PM\nFriday & Saturday: 4PM-11PM", categories:["Fancy Restaurant"] },
  { name:"Blyth & Burrows", distance:"0.1 miles", driving:"--", walking:"3 minutes", closed:"", hours:"Monday & Tuesday: 4PM-11PM\nWednesday-Friday: 4PM-12AM\nSaturday: 12PM-12AM\nSunday: 12PM-11PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Gritty's", distance:"0.1 miles", driving:"--", walking:"2 minutes", closed:"", hours:"Everyday: 11AM-1AM", categories:["Brewery/Cocktail Bar/Pub","Casual Restaurant"] },
  { name:"El Rayo Taqueria", distance:"0.2 miles", driving:"--", walking:"4 minutes", closed:"", hours:"Monday-Saturday: 11am-9pm\nSunday: 11am-7:30pm", categories:["Casual Restaurant","Kid Friendly"] },
  { name:"Gross Bakery", distance:"0.2 miles", driving:"--", walking:"4 minutes", closed:"", hours:"Friday-Sunday: 8AM-2PM", categories:["Coffee and Breakfast"] },
  { name:"Portland Lobster Co.", distance:"0.2 miles", driving:"--", walking:"4 minutes", closed:"", hours:"Seasonal", categories:["Casual Restaurant","Summer Activities/Attractions","Kid Friendly"] },
  { name:"Crispy Gai", distance:"0.2 miles", driving:"--", walking:"5 minutes", closed:"", hours:"Everyday: 11AM-3PM & 5-10PM", categories:["Casual Restaurant"] },
  { name:"Yosaku", distance:"0.2 miles", driving:"--", walking:"3 minute", closed:"", hours:"Monday-Thursday: 11:30AM-2PM, 5PM-9PM\nFriday: 11:30AM-2PM, 5:30PM-9:30PM\nSaturday: 11:30AM-2:30PM, 5PM-9:30PM\nSunday: 11:30AM-2:30PM, 5PM-9PM", categories:["Fancy Restaurant"] },
  { name:"Boone's Fish House", distance:"0.3 miles", driving:"3 minutes", walking:"7 minutes", closed:"", hours:"Monday-Thursday: 11:30AM-8PM\nFriday & Saturday: 11:30AM-9PM\nSunday: 11AM-8PM", categories:["Casual Restaurant","Kid Friendly"] },
  { name:"Cellardoor Winery", distance:"0.3 miles", driving:"3 minutes", walking:"7 minutes", closed:"Monday-Wednesday", hours:"Thursday-Saturday: 12PM-7PM\nSunday: 12PM-5PM", categories:["Brewery/Cocktail Bar/Pub","Year Round Attraction"] },
  { name:"Cocktail Mary", distance:"0.3 miles", driving:"2 minutes", walking:"4 minutes", closed:"", hours:"Monday-Saturday: 5PM-1AM\nSunday: 2PM-10ish", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"High Roller Lobster Company", distance:"0.3 miles", driving:"3 minutes", walking:"6 minutes", closed:"", hours:"Everyday 11AM-10PM", categories:["Casual Restaurant","Kid Friendly"] },
  { name:"Shays Grill Pub", distance:"0.3 miles", driving:"2 minutes", walking:"5 minutes", closed:"Sunday", hours:"Monday-Friday: 11AM-9PM\nSaturday: 12PM-9PM", categories:["Casual Restaurant","Brewery/Cocktail Bar/Pub"] },
  { name:"The Garden Cafe", distance:"0.3 miles", driving:"2 minutes", walking:"4 minutes", closed:"", hours:"Closed is seasonal", categories:["Casual Restaurant","Summer Activities/Attractions"] },
  { name:"Thirsty Pig", distance:"0.3 miles", driving:"2 minutes", walking:"5 minutes", closed:"Monday", hours:"Sunday-Thursday: 11AM-9PM\nFriday & Saturday: 11AM-11PM", categories:["Casual Restaurant","Brewery/Cocktail Bar/Pub"] },
  { name:"Fore Street", distance:"0.3 miles", driving:"2 minutes", walking:"6 minutes", closed:"", hours:"Everyday: 4:30PM-10PM", categories:["Fancy Restaurant"] },
  { name:"Solo Italiano", distance:"0.3 miles", driving:"2 minutes", walking:"6 minutes", closed:"Monday", hours:"Tuesday-Sunday: 4:30PM-9:30PM", categories:["Fancy Restaurant"] },
  { name:"The Corner Room", distance:"0.3 miles", driving:"2 minutes", walking:"5 minutes", closed:"Monday", hours:"Tuesday-Thursday: 5PM-9PM\nFriday & Saturday: 5PM-10PM", categories:["Fancy Restaurant"] },
  { name:"Cera", distance:"0.3 miles", driving:"2 minutes", walking:"5 minutes", closed:"", hours:"Monday-Thursday: 11AM-6PM\nFriday-Sunday: 11AM-5PM", categories:["Year Round Attraction"] },
  { name:"Flatbread Company", distance:"0.4 miles", driving:"2 minutes", walking:"8 minutes", closed:"", hours:"Sunday-Thursday 11:30am-9pm\nFriday-Saturday 11:30am-9:30pm", categories:["Casual Restaurant","Kid Friendly"] },
  { name:"Luke's Lobster Portland Pier", distance:"0.4 miles", driving:"3 minutes", walking:"8 minutes", closed:"", hours:"Everyday 11am-9pm", categories:["Casual Restaurant","Kid Friendly"] },
  { name:"The Porthole", distance:"0.4 miles", driving:"4 minutes", walking:"9 minutes", closed:"", hours:"Sunday-Thursday: 7AM-9PM\nFriday & Saturday: 7AM-11PM", categories:["Casual Restaurant","Coffee and Breakfast"] },
  { name:"The Victoria Mansion", distance:"0.4 miles", driving:"3 minutes", walking:"9 minutes", closed:"", hours:"Closed until May 1st", categories:["Year Round Attraction","Kid Friendly"] },
  { name:"Scales", distance:"0.4 miles", driving:"4 minutes", walking:"9 minutes", closed:"", hours:"Sunday-Thursday: 5PM-9PM\nFriday & Saturday: 4:30PM-9:30PM", categories:["Fancy Restaurant"] },
  { name:"Leeward", distance:"0.4 miles", driving:"3 minutes", walking:"7 minutes", closed:"Sunday & Monday", hours:"Tuesday-Saturday: 5PM-9PM", categories:["Fancy Restaurant"] },
  { name:"Eventide", distance:"0.4 miles", driving:"3 minutes", walking:"9 minutes", closed:"", hours:"Everyday 11am-11pm", categories:["Fancy Restaurant","Year Round Attraction"] },
  { name:"Nosh Kitchen and Bar", distance:"0.5 miles", driving:"3 minutes", walking:"10 minutes", closed:"", hours:"Everyday 11:30am-1am", categories:["Casual Restaurant","Brewery/Cocktail Bar/Pub"] },
  { name:"Regards", distance:"0.5 miles", driving:"3 minutes", walking:"9 minutes", closed:"Monday", hours:"Tuesday-Thursday 5pm-9pm\nFriday & Saturday 5pm-10pm", categories:["Fancy Restaurant"] },
  { name:"Duckfat", distance:"0.5 miles", driving:"3 minutes", walking:"11 minutes", closed:"", hours:"Sunday-Thursday 11am-9pm\nFriday & Saturday 11am-10pm", categories:["Casual Restaurant","Kid Friendly"] },
  { name:"Shipyard Brewing Co.", distance:"0.6 miles", driving:"4 minutes", walking:"14 minutes", closed:"", hours:"Monday-Saturday: 11AM-8PM\nSunday: 11AM-6PM", categories:["Brewery/Cocktail Bar/Pub","Kid Friendly"] },
  { name:"The Portland Museum of Art", distance:"0.6 miles", driving:"4 minutes", walking:"10 minutes", closed:"Monday & Tuesday", hours:"Wednesday, Thursday, Saturday, Sunday: 10AM-6PM\nFriday: 10AM-8PM", categories:["Year Round Attraction","Kid Friendly"] },
  { name:"Argenta Brewing Co.", distance:"0.7 miles", driving:"4 minutes", walking:"15 minutes", closed:"", hours:"Monday-Thursday: 3PM-9PM\nFriday & Saturday: 12PM-9PM\nSunday: 12PM-8PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"CBG", distance:"0.7 miles", driving:"4 minutes", walking:"11 minutes", closed:"", hours:"Everyday: 11AM-1AM", categories:["Casual Restaurant","Brewery/Cocktail Bar/Pub"] },
  { name:"Little Tap House", distance:"0.7 miles", driving:"4 minutes", walking:"9 minutes", closed:"Monday & Tuesday", hours:"Wednesday-Friday: 4PM-9PM\nSaturday & Sunday: 12PM-9PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"LB Kitchen", distance:"0.7 miles", driving:"4 minutes", walking:"15 minutes", closed:"", hours:"Everyday 8am-5pm", categories:["Casual Restaurant","Coffee and Breakfast"] },
  { name:"Leavitt & Sons Deli", distance:"0.8 miles", driving:"7 minutes", walking:"18 minutes", closed:"", hours:"Monday-Friday: 10AM-4:30PM\nSaturday: 10AM-4PM\nSunday: 10AM-2:30PM", categories:["Casual Restaurant"] },
  { name:"Wilson County", distance:"0.8 miles", driving:"5 minutes", walking:"15 minutes", closed:"", hours:"Monday-Thursday: 11AM-10PM\nFriday: 11AM-12AM\nSaturday: 9AM-12AM\nSunday: 9AM-10PM", categories:["Casual Restaurant","Brewery/Cocktail Bar/Pub"] },
  { name:"Austin St. Brewery", distance:"0.9 miles", driving:"5 minutes", walking:"20 minutes", closed:"", hours:"Monday-Wednesday: 2PM-8PM\nThursday-Saturday: 2PM-8PM\nSunday: 12PM-6PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Rising Tide Brewing", distance:"1 mile", driving:"5 minutes", walking:"21 minutes", closed:"", hours:"Monday-Thursday: 12-8PM\nFriday & Saturday: 12PM-9PM\nSunday: 12-6PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Oxbow Blending & Bottling", distance:"1 mile", driving:"5 minutes", walking:"19 minutes", closed:"", hours:"Sunday-Tuesday: 12PM-7PM\nWednesday & Thursday: 12PM-9PM\nFriday & Saturday: 12PM-10PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"The Portland Observatory", distance:"1.0 miles", driving:"5 minutes", walking:"20 minutes", closed:"", hours:"Temporarily closed", categories:["Year Round Attraction"] },
  { name:"Portland Zoo", distance:"1.0 miles", driving:"6 minutes", walking:"24 minutes", closed:"Monday", hours:"Tuesday: 3-5PM\nFriday: 4PM-12AM\nSaturday: 7:30AM-12PM\nSunday: 9AM-12AM", categories:["Kid Friendly","Year Round Attraction"] },
  { name:"Forage Market", distance:"1.0 miles", driving:"6 minutes", walking:"23 minutes", closed:"", hours:"Monday-Friday: 7AM-1PM\nSaturday & Sunday: 8AM-1PM", categories:["Coffee and Breakfast"] },
  { name:"Apres", distance:"1.1 miles", driving:"5 minutes", walking:"24 minutes", closed:"", hours:"Monday-Thursday: 3PM-9PM\nFriday: 12PM-10PM\nSaturday: 11AM-10PM\nSunday: 11AM-8PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Root Wild Kombucha", distance:"1.1 miles", driving:"6 minutes", walking:"23 minutes", closed:"", hours:"Monday & Tuesday: 12-6pm\nWednesday & Thursday: 12-7pm\nFriday & Saturday: 11am-8pm\nSunday: 11am-5pm", categories:["Year Round Attraction"] },
  { name:"Belleflower Brewing", distance:"1.2 miles", driving:"6 minutes", walking:"27 minutes", closed:"", hours:"Monday & Tuesday: 2PM-8PM\nWednesday-Saturday: 12PM-8PM\nSunday: 12PM-7PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Good Fire Brewing", distance:"1.2 miles", driving:"6 minutes", walking:"30 minutes", closed:"", hours:"Temporarily closed", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Lone Pine Brewing", distance:"1.3 miles", driving:"6 minutes", walking:"30 minutes", closed:"", hours:"Sunday-Thursday: 12PM-8PM\nFriday & Saturday: 12PM-9PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Scarborough Beach", distance:"1.4 miles", driving:"20 minutes", walking:"--", closed:"", hours:"Open seasonally unless a passholder", categories:["Summer Activities/Attractions","Kid Friendly"] },
  { name:"Ferry Beach", distance:"1.4 miles", driving:"22 minutes", walking:"--", closed:"", hours:"", categories:["Summer Activities/Attractions","Kid Friendly"] },
  { name:"Pine Point Beach", distance:"10.7 miles", driving:"26 minutes", walking:"--", closed:"", hours:"", categories:["Summer Activities/Attractions","Kid Friendly"] },
  { name:"Bunker Brewing Co.", distance:"11.6 miles", driving:"10 minutes", walking:"--", closed:"Monday", hours:"Tuesday-Thursday: 4PM-9PM\nFriday: 2PM-9PM\nSaturday: 12PM-9PM\nSunday: 12PM-7PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Bissell Brothers Brewing Co.", distance:"14 miles", driving:"11 minutes", walking:"--", closed:"", hours:"Monday & Tuesday: 11AM-5PM\nWednesday-Saturday: 11AM-8PM\nSunday: 11AM-6PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Willard Beach", distance:"2.6 miles", driving:"12 minutes", walking:"--", closed:"", hours:"", categories:["Summer Activities/Attractions","Kid Friendly"] },
  { name:"Spring Point Lighthouse", distance:"3 miles", driving:"12 minutes", walking:"--", closed:"", hours:"", categories:["Year Round Attraction","Kid Friendly"] },
  { name:"Bug Light", distance:"3.5 miles", driving:"12 minutes", walking:"--", closed:"", hours:"", categories:["Year Round Attraction","Kid Friendly"] },
  { name:"Portland Headlight", distance:"3.6 miles", driving:"15 minutes", walking:"--", closed:"", hours:"", categories:["Year Round Attraction","Kid Friendly"] },
  { name:"Allagash Brewing Co.", distance:"3.7 miles", driving:"20 minutes", walking:"--", closed:"Monday-Wednesday", hours:"Thursday-Saturday: 11AM-8PM\nSunday: 11AM-7PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Battery Steele Brewery", distance:"4.5 miles", driving:"20 minutes", walking:"--", closed:"Tuesday", hours:"Wednesday-Saturday: 12PM-7PM\nSunday: 12PM-6PM\nMonday: 1PM-7PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Definitive Brewing", distance:"5.4 miles", driving:"20 minutes", walking:"--", closed:"", hours:"Monday-Wednesday: 3PM-7PM\nThursday: 1PM-8PM\nFriday & Saturday: 12PM-8PM\nSunday: 12PM-6PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Foundation Brewing", distance:"5.4 miles", driving:"20 minutes", walking:"--", closed:"Tuesday", hours:"Monday, Wednesday-Friday: 12PM-8:30PM\nSaturday: 12PM-8PM\nSunday: 12PM-6PM", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Geary Brewing Co.", distance:"5.4 miles", driving:"25 minutes", walking:"--", closed:"", hours:"Reopens in April", categories:["Brewery/Cocktail Bar/Pub"] },
  { name:"Crescent Beach", distance:"5.4 miles", driving:"16 minutes", walking:"--", closed:"", hours:"", categories:["Summer Activities/Attractions","Kid Friendly"] },
  { name:"Kettle Cove", distance:"5.8 miles", driving:"18 minutes", walking:"--", closed:"", hours:"", categories:["Summer Activities/Attractions","Kid Friendly"] },
  { name:"Higgins Beach", distance:"7.1 miles", driving:"19 minutes", walking:"--", closed:"", hours:"", categories:["Summer Activities/Attractions","Kid Friendly"] },
  { name:"Jones Landing", distance:"7.4 miles", driving:"N/A", walking:"N/A", closed:"", hours:"", categories:["Summer Activities/Attractions"] },
  { name:"Islands", distance:"8.2 miles", driving:"N/A", walking:"N/A", closed:"", hours:"", categories:["Summer Activities/Attractions","Year Round Attraction"] },
  { name:"Wayside Tavern", distance:"1.0 miles", driving:"6 minutes", walking:"19 minutes", closed:"Wednesday", hours:"Sunday-Tuesday, & Thursday: 4PM-9PM\nFriday & Saturday: 4PM-9:30PM", categories:["Casual Restaurant"] },
  { name:"Thompsons Point Ice Rink", distance:"3.1 miles", driving:"10 minutes", walking:"--", closed:"", hours:"Seasonal", categories:["Winter Activities/Attractions","Kid Friendly"] },
  { name:"Portland Children's Museum", distance:"3.1 miles", driving:"10 minutes", walking:"--", closed:"Tuesday", hours:"Wednesday-Friday: 10AM-4PM\nSaturday-Monday: 9AM-4PM", categories:["Kid Friendly","Year Round Attraction"] },
  { name:"Ocotillo", distance:"0.7 miles", driving:"4 minutes", walking:"15 minutes", closed:"", hours:"Monday-Friday: 9AM-9PM\nSaturday & Sunday: 8AM-9PM", categories:["Coffee and Breakfast","Casual Restaurant"] },
  { name:"Chaval", distance:"1.0 miles", driving:"5 minutes", walking:"18 minutes", closed:"Sunday", hours:"Monday-Saturday: 4:30PM-9PM", categories:["Fancy Restaurant"] },
  { name:"Northern Lights Event LL Bean", distance:"17.6 miles", driving:"26 minutes", walking:"--", closed:"", hours:"", categories:["Winter Activities/Attractions","Kid Friendly"] },
  { name:"Gardens Aglow — Coastal Maine Botanical Gardens", distance:"58 miles", driving:"1 hr 15 minutes", walking:"--", closed:"", hours:"", categories:["Winter Activities/Attractions","Kid Friendly"] },
  { name:"Terrarium", distance:"0.2 miles", driving:"2 minutes", walking:"3 minutes", closed:"Monday & Tuesday", hours:"Wednesday & Thursday: 12PM-7PM\nFriday & Saturday: 12PM-8PM\nSunday: 12PM-5PM", categories:["Year Round Attraction","Kid Friendly"] },
  { name:"The Escape Room", distance:"0.4 miles", driving:"3 minutes", walking:"7 minutes", closed:"Monday & Tuesday", hours:"Wednesday & Thursday: 12PM-8:30PM\nFriday: 12PM-9:45PM\nSaturday: 11AM-10:15PM\nSunday: 11:30AM-7:30PM", categories:["Year Round Attraction","Kid Friendly"] },
  { name:"Maine Classic Car Museum", distance:"20.6 miles", driving:"26 minutes", walking:"--", closed:"", hours:"", categories:["Year Round Attraction"] },
  { name:"Bayside American Cafe", distance:"0.7 miles", driving:"5 minutes", walking:"15 minutes", closed:"", hours:"Tuesday-Friday: 8AM-1PM\nSaturday-Monday: 7AM-2PM", categories:["Coffee and Breakfast"] },
  { name:"Hot Suppa", distance:"0.8 miles", driving:"5 minutes", walking:"15 minutes", closed:"", hours:"Everyday: 8AM-2PM", categories:["Coffee and Breakfast","Casual Restaurant"] },
  { name:"Tandem", distance:"1.0 miles", driving:"5 minutes", walking:"19 minutes", closed:"", hours:"Everyday: 8AM-1PM", categories:["Coffee and Breakfast"] },
  { name:"The Ugly Duckling", distance:"1.0 miles", driving:"5 minutes", walking:"19 minutes", closed:"", hours:"Everyday: 7AM-3PM\nFriday Night: 7PM-10PM", categories:["Coffee and Breakfast"] },
  { name:"Smalls", distance:"1.0 miles", driving:"4 minutes", walking:"15 minutes", closed:"", hours:"Everyday: 8AM-8PM", categories:["Coffee and Breakfast"] },
  { name:"Papi", distance:"0.1 miles", driving:"--", walking:"3 minutes", closed:"Thursday", hours:"Sunday-Tuesday 4pm-9pm\nWednesday & Friday 4pm-12am\nSaturday 12pm-12am", categories:["Casual Restaurant","Brewery/Cocktail Bar/Pub"] },
  { name:"Green Elephant", distance:"0.5 miles", driving:"4 minutes", walking:"13 minutes", closed:"Monday", hours:"Tuesday-Thursday 11:30am-2:30pm, 5pm-9pm\nFriday & Saturday 11:30am-2:30pm, 5pm-9:30pm\nSunday 5pm-9pm", categories:["Casual Restaurant"] },
  { name:"The Honey Paw", distance:"0.4 miles", driving:"3 minutes", walking:"10 minutes", closed:"", hours:"Everyday 11am-10pm", categories:["Casual Restaurant"] },
  { name:"Taco Escobarr", distance:"0.5 miles", driving:"4 minutes", walking:"12 minutes", closed:"", hours:"Everyday 11am-1am", categories:["Casual Restaurant","Kid Friendly"] },
  { name:"Bread and Friends", distance:"0.1 miles", driving:"--", walking:"3 minutes", closed:"", hours:"Monday-Friday: 8AM-1PM\nSaturday & Sunday: 8AM-3PM\nThursday-Sunday night: 5:30PM-9PM", categories:["Coffee and Breakfast","Casual Restaurant"] },
];

const CATEGORIES = [
  "Casual Restaurant",
  "Fancy Restaurant",
  "Brewery/Cocktail Bar/Pub",
  "Coffee and Breakfast",
  "Kid Friendly",
  "Summer Activities/Attractions",
  "Winter Activities/Attractions",
  "Year Round Attraction"
];

const CAT_CLASS = {
  "Casual Restaurant": "cat-casual",
  "Fancy Restaurant": "cat-fancy",
  "Brewery/Cocktail Bar/Pub": "cat-brewery",
  "Coffee and Breakfast": "cat-coffee",
  "Kid Friendly": "cat-kids",
  "Summer Activities/Attractions": "cat-summer",
  "Winter Activities/Attractions": "cat-winter",
  "Year Round Attraction": "cat-yearround"
};

// ========== STATE ==========
let activeCategories = new Set();
let sortAsc = true;
let searchText = '';

// ========== HELPERS ==========
function parseDistance(d) {
  if (!d) return 9999;
  const s = d.toLowerCase().replace(/,/g,'');
  const m = s.match(/([\d.]+)\s*(mile|miles|minute|minutes)/);
  if (m) return parseFloat(m[1]);
  return 9999;
}

function matchesSearch(item, q) {
  if (!q) return true;
  const terms = q.toLowerCase().split(/\s+/);
  const searchable = [
    item.name, item.distance, item.driving, item.walking,
    item.closed, item.hours, ...item.categories
  ].join(' ').toLowerCase();
  return terms.every(t => searchable.includes(t));
}

function matchesCategory(item) {
  if (activeCategories.size === 0) return true;
  return item.categories.some(c => activeCategories.has(c));
}

// ========== RENDER ==========
function renderFilters() {
  const container = document.getElementById('filters');
  container.innerHTML = CATEGORIES.map(cat => {
    const active = activeCategories.has(cat) ? ' active' : '';
    return `<button class="filter-btn${active}" data-cat="${cat}">${cat}</button>`;
  }).join('');

  container.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const cat = btn.dataset.cat;
      if (activeCategories.has(cat)) activeCategories.delete(cat);
      else activeCategories.add(cat);
      renderFilters();
      renderCards();
    });
  });
}

function renderCards() {
  const grid = document.getElementById('cardsGrid');
  const empty = document.getElementById('emptyState');
  const countEl = document.getElementById('resultsCount');

  let filtered = DATA.filter(item => matchesSearch(item, searchText) && matchesCategory(item));

  filtered.sort((a, b) => {
    const da = parseDistance(a.distance);
    const db = parseDistance(b.distance);
    return sortAsc ? da - db : db - da;
  });

  countEl.textContent = `${filtered.length} result${filtered.length !== 1 ? 's' : ''}`;

  if (filtered.length === 0) {
    grid.innerHTML = '';
    empty.style.display = 'block';
    return;
  }

  empty.style.display = 'none';

  grid.innerHTML = filtered.map((item, i) => {
    const cats = item.categories.map(c =>
      `<span class="card-cat ${CAT_CLASS[c] || ''}">${c}</span>`
    ).join('');

    const details = [];
    if (item.driving && item.driving !== '--')
      details.push(['Drive', item.driving]);
    if (item.walking && item.walking !== '--')
      details.push(['Walk', item.walking]);
    if (item.closed)
      details.push(['Closed', item.closed]);

    const detailsHtml = details.map(([label, val]) => {
      const cls = label === 'Closed' ? ' closed-val' : '';
      return `<span class="detail-label">${label}</span><span class="detail-value${cls}">${val}</span>`;
    }).join('');

    const hoursHtml = item.hours
      ? `<div class="divider"></div><span class="detail-label">Hours</span><span class="detail-value hours-val">${item.hours}</span>`
      : '';

    return `
      <div class="card" style="animation-delay:${Math.min(i * 0.04, 0.6)}s">
        <div class="card-top">
          <div class="card-name">${item.name}</div>
          <span class="card-distance-badge">${item.distance}</span>
        </div>
        <div class="card-categories">${cats}</div>
        <div class="card-details">
          ${detailsHtml}
          ${hoursHtml}
        </div>
      </div>
    `;
  }).join('');
}

// ========== EVENTS ==========
const searchInput = document.getElementById('searchInput');
const clearBtn = document.getElementById('clearBtn');
const sortToggle = document.getElementById('sortToggle');

searchInput.addEventListener('input', () => {
  searchText = searchInput.value.trim();
  clearBtn.classList.toggle('visible', searchText.length > 0);
  renderCards();
});

clearBtn.addEventListener('click', () => {
  searchInput.value = '';
  searchText = '';
  clearBtn.classList.remove('visible');
  searchInput.focus();
  renderCards();
});

sortToggle.addEventListener('click', () => {
  sortAsc = !sortAsc;
  sortToggle.querySelector('span').textContent = sortAsc ? 'Distance ↑' : 'Distance ↓';
  renderCards();
});

// ========== INIT ==========
renderFilters();
renderCards();
</script>
</body>
</html>
